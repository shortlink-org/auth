# NOTE:
# APPLICATION     - Name application
# REGISTRY_IMAGE  - Registry image
# DOCKERFILE_PATH - Path to Dockerfile
# CMD_PATH        - Path to a binary file
.matrix_build_docker_ui:
  parallel:
    matrix:
      - APPLICATION: auth-ui
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/ui
        WORKDIR: ./boundaries/ui
        # Path relative to WORKDIR so build runs as: cd WORKDIR && docker build -f DOCKERFILE_PATH .
        DOCKERFILE_PATH: ops/dockerfile/auth-ui.Dockerfile
        DOCKERFILE_ARGS: >-
          --build-arg API_URI=${API_URI}
          --build-arg NEXT_PUBLIC_API_URI=${NEXT_PUBLIC_API_URI}

.matrix_build_docker:
  parallel:
    matrix:
      - APPLICATION: auth
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/auth
        WORKDIR: ./boundaries/auth
        # Path relative to WORKDIR so build runs as: cd WORKDIR && docker build -f DOCKERFILE_PATH .
        DOCKERFILE_PATH: Dockerfile
        DOCKERFILE_ARGS: >-
          --build-arg CMD_PATH=./cmd
