# NOTE:
# APPLICATION     - Name application
# REGISTRY_IMAGE  - Registry image
# DOCKERFILE_PATH - Path to Dockerfile
# CMD_PATH        - Path to a binary file
.matrix_build_docker_ui:
  parallel:
    matrix:
      - APPLICATION: auth-ui
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/ui
        DOCKERFILE_PATH: boundaries/ui/ops/dockerfile/auth-ui.Dockerfile
        DOCKERFILE_ARGS: >-
          --build-arg API_URI=${API_URI}
          --build-arg NEXT_PUBLIC_API_URI=${NEXT_PUBLIC_API_URI}

.matrix_build_docker:
  parallel:
    matrix:
      - APPLICATION: auth
        REGISTRY_IMAGE: $CI_REGISTRY_IMAGE/auth
        WORKDIR: ./boundaries/auth
        DOCKERFILE_PATH: boundaries/auth/Dockerfile
        DOCKERFILE_ARGS: >-
          --build-arg CMD_PATH=./cmd
