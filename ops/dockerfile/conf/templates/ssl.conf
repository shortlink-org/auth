# Better performance and security for SSL

# Note: 'ssl on;' is deprecated since nginx 1.15.0
# Use 'listen 443 ssl;' in server block instead
ssl_session_cache  builtin:1000  shared:SSL:10m;
ssl_session_timeout 10m;

# Enable only secure TLS versions (TLSv1.3 is required for QUIC)
ssl_protocols TLSv1.2 TLSv1.3;

# Add Alt-Svc header to negotiate HTTP/3
add_header alt-svc 'h3=":443"; ma=86400';

ssl_prefer_server_ciphers on;
# Modern, secure cipher suites (removed RC4 and weak ciphers)
ssl_ciphers "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384";
